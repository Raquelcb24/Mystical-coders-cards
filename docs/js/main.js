console.log(">> Ready :)");console.log("working var");const b=document.querySelector(".js_form"),c=document.querySelector(".js_name"),i=document.querySelector(".js_job"),g=document.querySelector(".js_email"),L=document.querySelector(".js_phone"),v=document.querySelector(".js_linkedin"),y=document.querySelector(".js_github"),s=document.querySelector(".js_preview-card"),w=document.querySelector(".js_button-reset"),q=document.querySelector(".js_radio__check"),d=document.querySelector(".js-create-card"),u=document.querySelector(".js-twitterLink"),m=document.querySelector(".js-form-validation-email"),p=document.querySelector(".js-form-validation-tlf"),n={palette:"1",name:"",job:"",phone:"",email:"",linkedin:"",github:"",photo:""},k=r=>{r.preventDefault();const t=r.target.id,o=r.target.value,e=r.target.name;if(console.log("working input"),n[e]=o,t==="name")c.innerHTML=o;else if(t==="job")i.innerHTML=o;else if(t==="email"){const a=/^[\w-]+(?:\.[\w-]+)*@(?:[\w-]+\.)+[a-zA-Z]{2,7}$/;o.match(a)?(m.classList.add("hidden"),g.href="mailto:"+o):m.classList.remove("hidden")}else if(t==="phone"){const a=/^(\+?\d{1,3})?[-. ]?\(?\d{3}\)?[-. ]?\d{3}[-. ]?\d{4}$/;o.match(a)?(p.classList.add("hidden"),L.href="tel:"+o):p.classList.remove("hidden")}else t==="linkedin"?v.href=o:t==="github"?y.href=o:e==="palette"&&(o==="2"&&(s.classList.add("palette2"),s.classList.remove("palette1"),s.classList.remove("palette3")),o==="3"&&(s.classList.add("palette3"),s.classList.remove("palette1"),s.classList.remove("palette2")),o==="1"&&(s.classList.add("palette1"),s.classList.remove("palette3"),s.classList.remove("palette2")));console.log(n),localStorage.setItem("userData",JSON.stringify(n))};b.addEventListener("input",k);const _=r=>{r.preventDefault(),u.classList.remove("hidden"),d.classList.add("btn-off")};d.addEventListener("click",_);function T(r){r.preventDefault();const o=document.querySelector(".js-fill").querySelectorAll("input");s.classList.add("palette1"),s.classList.remove("palette3"),s.classList.remove("palette2"),u.classList.add("hidden");for(const e of o)e.value="",n[e.id]="",c.innerHTML="Nombre Apellido",i.innerHTML="Front-end developer",j.style.backgroundImage="",S.style.backgroundImage="url(./images/profile2.jpg)";q.checked=!0,console.log(n)}w.addEventListener("click",T);function I(){const r=document.querySelector(".js__profile-image"),t=document.querySelector(".js__profile-preview"),o=localStorage.getItem("userData");if(o!==null){const e=JSON.parse(o);s.classList.add(`palette${e.palette}`),c.innerHTML=e.name,i.innerHTML=e.job,g.href=`mailto:${e.email}`,L.href=`tel:${e.phone}`,v.href=`https://www.linkedin.com/in/${e.linkedin}`,y.href=`https://github.com/${e.github}`,r.style.backgroundImage=`url(${e.photo})`,t.style.backgroundImage=`url(${e.photo})`}}I();const l=new FileReader,$=document.querySelector(".js__profile-upload-btn"),j=document.querySelector(".js__profile-image"),S=document.querySelector(".js__profile-preview");function C(r){const t=r.currentTarget.files[0];l.addEventListener("load",H),l.readAsDataURL(t)}function H(){j.style.backgroundImage=`url(${l.result})`,S.style.backgroundImage=`url(${l.result})`,n.photo=l.result}$.addEventListener("change",C);const E=document.querySelectorAll(".js_collapsable"),M=document.querySelectorAll(".js_parent"),D=r=>{const o=r.currentTarget.parentNode;for(const e of M)e===o?e.classList.remove("js-collapsable"):e.classList.add("js-collapsable")};for(const r of E)r.addEventListener("click",D);const A=document.querySelector(".js-share-twitter"),f=document.querySelector(".js-share-link"),h=document.querySelector(".js-error"),P=r=>{r.preventDefault(),fetch("https://dev.adalab.es/api/card/",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(n)}).then(t=>t.json()).then(t=>{if(console.log(t),t.success){u.classList.remove("hidden"),f.innerHTML=t.cardURL,f.href=t.cardURL;const e=`https://twitter.com/intent/tweet?text=${encodeURIComponent("¡He creado mi nueva tarjeta de contacto con MystiCards by Mystical Coders!")}&url=${t.cardURL}`;A.href=e}else h.classList.remove("hidden"),h.innerHTML="Asegúrate de haber rellenado todos los campos"})};d.addEventListener("click",P);
//# sourceMappingURL=main.js.map
