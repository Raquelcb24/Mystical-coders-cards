console.log(">> Ready :)");console.log("working var");const b=document.querySelector(".js_form"),c=document.querySelector(".js_name"),i=document.querySelector(".js_job"),g=document.querySelector(".js_email"),L=document.querySelector(".js_phone"),v=document.querySelector(".js_linkedin"),y=document.querySelector(".js_github"),n=document.querySelector(".js_preview-card"),w=document.querySelector(".js_button-reset"),q=document.querySelector(".js_radio__check"),d=document.querySelector(".js-create-card"),u=document.querySelector(".js-twitterLink"),m=document.querySelector(".js-form-validation-email"),p=document.querySelector(".js-form-validation-tlf"),s={palette:"1",name:"",job:"",phone:"",email:"",linkedin:"",github:"",photo:""},k=o=>{o.preventDefault();const t=o.target.id,r=o.target.value,e=o.target.name;if(console.log("working input"),s[e]=r,t==="name")c.innerHTML=r;else if(t==="job")i.innerHTML=r;else if(t==="email"){const a=/^[\w-]+(?:\.[\w-]+)*@(?:[\w-]+\.)+[a-zA-Z]{2,7}$/;r.match(a)?(m.classList.add("hidden"),g.href="mailto:"+r):m.classList.remove("hidden")}else if(t==="phone"){const a=/^(\+?\d{1,3})?[-. ]?\(?\d{3}\)?[-. ]?\d{3}[-. ]?\d{4}$/;r.match(a)?(p.classList.add("hidden"),L.href="tel:"+r):p.classList.remove("hidden")}else t==="linkedin"?v.href=r:t==="github"?y.href=r:e==="palette"&&(r==="2"&&(n.classList.add("palette2"),n.classList.remove("palette1"),n.classList.remove("palette3")),r==="3"&&(n.classList.add("palette3"),n.classList.remove("palette1"),n.classList.remove("palette2")),r==="1"&&(n.classList.add("palette1"),n.classList.remove("palette3"),n.classList.remove("palette2")));console.log(s),localStorage.setItem("userData",JSON.stringify(s))};b.addEventListener("input",k);const _=o=>{o.preventDefault(),u.classList.remove("hidden"),d.classList.add("btn-off")};d.addEventListener("click",_);function T(o){o.preventDefault();const r=document.querySelector(".js-fill").querySelectorAll("input");n.classList.add("palette1"),n.classList.remove("palette3"),n.classList.remove("palette2"),u.classList.add("hidden");for(const e of r)e.value="",s[e.id]="",c.innerHTML="Nombre Apellido",i.innerHTML="Front-end developer",j.style.backgroundImage="",S.style.backgroundImage="url(./images/profile2.jpg)";q.checked=!0,console.log(s)}w.addEventListener("click",T);function I(){const o=document.querySelector(".js__profile-image"),t=document.querySelector(".js__profile-preview"),r=localStorage.getItem("userData");if(r!==null){const e=JSON.parse(r);n.classList.add(`palette${e.palette}`),c.innerHTML=e.name,i.innerHTML=e.job,g.href=`mailto:${e.email}`,L.href=`tel:${e.phone}`,v.href=`https://www.linkedin.com/in/${e.linkedin}`,y.href=`https://github.com/${e.github}`,o.style.backgroundImage=`url(${e.photo})`,t.style.backgroundImage=`url(${e.photo})`}}I();const l=new FileReader,$=document.querySelector(".js__profile-upload-btn"),j=document.querySelector(".js__profile-image"),S=document.querySelector(".js__profile-preview");function H(o){const t=o.currentTarget.files[0];l.addEventListener("load",C),l.readAsDataURL(t)}function C(){j.style.backgroundImage=`url(${l.result})`,S.style.backgroundImage=`url(${l.result})`,s.photo=l.result}$.addEventListener("change",H);const E=document.querySelectorAll(".js_collapsable"),D=document.querySelectorAll(".js_parent"),M=o=>{const r=o.currentTarget.parentNode;for(const e of D)e===r?e.classList.remove("js-collapsable"):e.classList.add("js-collapsable")};for(const o of E)o.addEventListener("click",M);const A=document.querySelector(".js-share-twitter"),f=document.querySelector(".js-share-link"),h=document.querySelector(".js-error"),P=o=>{o.preventDefault(),fetch("https://dev.adalab.es/api/card/",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(s)}).then(t=>t.json()).then(t=>{if(console.log(t),t.success){u.classList.remove("hidden"),f.innerHTML=t.cardURL,f.href=t.cardURL;const e=`https://twitter.com/intent/tweet?text=${encodeURIComponent("¡Mira mi tarjeta creada con esta increíble aplicación!")}&url=${t.cardURL}`;A.href=e}else h.classList.remove("hidden"),h.innerHTML="Asegúrate de haber rellenado todos los campos"})};d.addEventListener("click",P);
//# sourceMappingURL=main.js.map
